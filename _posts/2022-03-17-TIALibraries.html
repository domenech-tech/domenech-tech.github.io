---
layout: post
title: TIA Libraries
date: 2022-03-17
tags: TIA Libraries
description: Uso de librerias en TIA Portal
---

<p>El uso de librerias és básico para que el código evolucione, la mejora continua, la optimización de recursos y la agilidad en el desarrollo.</p>
<p>Por eso conocer su funcionamiento es importarte para hace un buen uso del mismo</p>


<h1>Introducción</h1>
En TIA hay dos tipos de librerias: 
<ul>
  <li>Librerias de proyecto</li>
  <li>Librerias globales</li>
</ul>
<p>
  Los dos tipos funcionan de la misma manera, la diferencia es que el alcance de la primera se limita al proyecto y en cambio las
  globales pueden usarse en distintos proyectos.
</p>

<h2>Elementos que conforman una libreria</h2>
<p>En una libreria siemens encontramos dos tipos de objectos claramente diferenciados.</p>
<ul>
  <li>Types</li>
  <li>Master Copies</li>
</ul>
<p>
  La diferencia entre los dos tipos es que los objetos tipificados (Types) permiten hacer versiones del mismso.
  Su uso es el adecuado para FBs,FCs a nivel de PLC y para faceplates, Pop-up a nivel HMI.
  Ya que permiten ir evolucionando el coódiga a traves de las distintas versiones.
  Tambien permiten actualizar el código en todo el proyecto de forma automática.
</p>
<p>
  Las copias maestras (master copies) son objectos estáticos y que pocas veces suelen evolucionar.
  Es el caso de objetos estáticos de la pantalla, codigo de configurarión, DBs de constantes, parámetros. 
  Este tipo de cosas.
</p>

<h2>Ejemplo de aplicación de uso de librerias</h2>
<p>Exponemos a continuación, como ejemplo, el uso de librerias para la generación automatica de pantallas HMI</p>
<ol>
  <li>Añadimosuna HMI al proyecto. En este ejemplo se trata de una TP900 </li>
  <li>Añadimos los Script HMI
    <pre>
      Global Library -> Types -> HMI -> WinCCComfort -> Scripts
    </pre>
    Los scripts de las pantallas tienden a ser modificados para adaptarse a nuevas especificaciones. Añadir características o mejorar el código.
  </li>
  <li>
    User management
    <pre>
      Global Library -> Master Copies -> HMI -> WinCCComfort -> UserManagement
    </pre>
    La gestión de usuarios no suele modificarse y es constante entre proyectos.
    <ul>
      <li>Authorizations</li>
      <li>UserGroups</li>
      <li>Users</li>
    </ul>
  </li>
  <li>
    Pop-ups
    <pre>
      Global Library -> Master Copies -> HMI -> ScreenManagement -> Pop-ups 
    </pre>
    Los pop-ups suelen ser siempre los mismos. Solamente cambian al modificar el FB asociado.
    Quiza en una fase inicial de sesarrollo de un nuevo FB sí convendria que estuviera tipificado per en la fase 
    de producción no deberia modificarse.
  </li>
  <li>
    Screens (Navigation)
    <p>Son el conjunto de pantallas que nos permiten navegar por nuestra aplicacón. Contienen los menús, logins, ajustes de pantalla como idioma, brillo.</p>
    <pre>
      Global Librery -> Master Copy -> HMI -> Comfort -> Screens -> App 
    </pre>
  </li>
  <li>
    <p>Runtime Languages</p>
    <p>Normalmente se utliza Ingles, Aleman y castellano.</p>
  </li>
  <li>
    Slide-in Screens
    En el proyecto habilitamos las Slide-in right y le añadimos los objetos de la libreria.
    La slide-in se suele utilizar para navegar por la App. Ir a las distintas pantallas: Settings, alarmas, etc
  </li>
  <li>
    <p>Schedule tasks</p>
    <p>Son las tareas programadas. Nosotros las utilizamos, por ejemplo, para ejecutar un script a cada cada cambio de usuario </p>
  </li>
  <li>
    Activar el SiVarc generation
  </li>
  <li>
    Una vez finalizado hemos de actualizar la connexion de los tags de la tabla "PLC_PanelBlocks" segun la conexión de la HMI con el PLC.
  </li>
</ol>
